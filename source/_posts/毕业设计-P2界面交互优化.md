---
title: 毕业设计-P2界面交互优化
tags:
  - Computer Graphics
category: 毕业设计
index_img: 'https://ibed.csgowiki.top/20210404161108.png'
password: 88888888
abstract: 毕业设计相关技术记录-界面交互优化
message: 毕业设计相关的文章将会加密到结题为止
abbrlink: 27919
date: 2021-04-04 14:43:03
---

## 概述

{% note success %}
本毕业设计采用OpenGL+QT作为渲染显示的技术工具
{% endnote %}

由于目前实验项目不支持对显示图像的缩放，而且旋转也有一定问题，本文将对这些问题进行改进。

<!--more-->

## 鼠标滚轮缩放

我用了最简单的方法来实现鼠标滚轮缩放

QT中可以使用`GLWidget`继承`QOpenGLWidget`和`QOpenGLFunctions_3_3_Core`来使用`wheelEvent`函数，具体定义如下：

```c++
void wheelEvent(QWheelEvent *event) override;
```

可以通过如下方式获取滚轮每滚一次的刻度

```c++
QPoint numPixels, numDegrees;
numPixels = event->pixelDelta();
numDegrees = event->angleDelta() / 8;

int step = 0;
if (!numPixels.isNull()) {
    step = numPixels.y();
}
else if (!numDegrees.isNull()) {
    QPoint numSteps = numDegrees / 15;
    step = numSteps.y();
}

// demo
scale_factor += step * scale_transform_tick;
if (scale_factor < 0) scale_factor = 0;
update();
```

`step`即为滚轮滚过的刻度，一般为+1或-1。
我这里演示使用了常量`scale_transform_tick=0.05`，表示每滚过一个刻度放大或缩小的比例。

最终的`scale_factor`为缩放量。
在`paintGL()`中作用在`mMatrix.scale(scale_factor)`
> 这里的 {% label info @mMatrix %}即为**Model-View-Projection Transform**中的Model Transform，表示成像物体之间的位置关系。
> 详细内容见：[计算机图形学-变换](https://hx-w.top/article/b443a96ffeb2/)

{% note danger %}
这样设计虽然方便，但是也有个问题，即由于缩放比例`scale_transform_tick`不变，缩小时变化过快，而放大时变化过慢。
不过鉴于此实验只适用于展示效果，并不做长期使用，在时间有限的情况下就不追求这些优化了。
{% endnote %}

## 鼠标右键平移
...

## 最终效果展示

![效果](https://ibed.csgowiki.top/20210404161108.png)

可以看见模型的全部内容了:star: